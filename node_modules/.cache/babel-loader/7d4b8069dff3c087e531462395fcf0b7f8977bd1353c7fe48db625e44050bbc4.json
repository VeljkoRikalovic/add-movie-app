{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Veljko/Desktop/addmovieapp/add-movie-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Veljko/Desktop/addmovieapp/add-movie-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Veljko/Desktop/addmovieapp/add-movie-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from\"react\";import MoviesList from\"./components/MoviesList\";import AddMovie from\"./components/AddMovie\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var fetchMoviesHandler=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loadedMovies,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(\"https://react-ba5c7-default-rtdb.europe-west1.firebasedatabase.app/movies.json\");case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(\"Something went wrong!\");case 8:_context.next=10;return response.json();case 10:data=_context.sent;loadedMovies=[];for(key in data){loadedMovies.push({id:key,title:data[key].title,openingText:data[key].openingText,releaseDate:data[key].releaseDate});}setMovies(loadedMovies);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 19:setIsLoading(false);case 20:case\"end\":return _context.stop();}},_callee,null,[[2,16]]);})),[]);useEffect(function(){fetchMoviesHandler();},[fetchMoviesHandler]);function addMovieHandler(_x){return _addMovieHandler.apply(this,arguments);}function _addMovieHandler(){_addMovieHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(movie){var response,date;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://react-ba5c7-default-rtdb.europe-west1.firebasedatabase.app/movies.json\",{method:\"POST\",body:JSON.stringify(movie),headers:{\"content-type\":\"application/json\"}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:date=_context2.sent;case 6:case\"end\":return _context2.stop();}},_callee2);}));return _addMovieHandler.apply(this,arguments);}var content=/*#__PURE__*/_jsx(\"p\",{children:\"Found no movies.\"});if(movies.length>0){content=/*#__PURE__*/_jsx(MoviesList,{movies:movies});}if(error){content=/*#__PURE__*/_jsx(\"p\",{children:error});}if(isLoading){content=/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(AddMovie,{onAddMovie:addMovieHandler})}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:fetchMoviesHandler,children:\"Fetch Movies\"})}),/*#__PURE__*/_jsx(\"section\",{children:content})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","MoviesList","AddMovie","App","movies","setMovies","isLoading","setIsLoading","error","setError","fetchMoviesHandler","fetch","response","ok","Error","json","data","loadedMovies","key","push","id","title","openingText","releaseDate","message","addMovieHandler","movie","method","body","JSON","stringify","headers","date","content","length"],"sources":["C:/Users/Veljko/Desktop/addmovieapp/add-movie-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\n\nimport MoviesList from \"./components/MoviesList\";\nimport AddMovie from \"./components/AddMovie\";\nimport \"./App.css\";\n\nfunction App() {\n  const [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchMoviesHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await fetch(\n        \"https://react-ba5c7-default-rtdb.europe-west1.firebasedatabase.app/movies.json\"\n      );\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const data = await response.json();\n\n      const loadedMovies = [];\n\n      for(const key in data){\n        loadedMovies.push({\n          id: key,\n          title: data[key].title,\n          openingText: data[key].openingText,\n          releaseDate: data[key].releaseDate,\n        })\n      }\n\n      setMovies(loadedMovies);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsLoading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchMoviesHandler();\n  }, [fetchMoviesHandler]);\n\n  async function addMovieHandler(movie) {\n    const response = await fetch(\n      \"https://react-ba5c7-default-rtdb.europe-west1.firebasedatabase.app/movies.json\",\n      {\n        method: \"POST\",\n        body: JSON.stringify(movie),\n        headers: { \"content-type\": \"application/json\" },\n      }\n    );\n    const date = await response.json();\n  }\n\n  let content = <p>Found no movies.</p>;\n\n  if (movies.length > 0) {\n    content = <MoviesList movies={movies} />;\n  }\n\n  if (error) {\n    content = <p>{error}</p>;\n  }\n\n  if (isLoading) {\n    content = <p>Loading...</p>;\n  }\n\n  return (\n    <React.Fragment>\n      <section>\n        <AddMovie onAddMovie={addMovieHandler} />\n      </section>\n      <section>\n        <button onClick={fetchMoviesHandler}>Fetch Movies</button>\n      </section>\n      <section>{content}</section>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n"],"mappings":"qaAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAE/D,MAAOC,WAAU,KAAM,yBAAyB,CAChD,MAAOC,SAAQ,KAAM,uBAAuB,CAC5C,MAAO,WAAW,CAAC,wFAEnB,QAASC,IAAG,EAAG,CACb,cAA4BL,QAAQ,CAAC,EAAE,CAAC,wCAAjCM,MAAM,eAAEC,SAAS,eACxB,eAAkCP,QAAQ,CAAC,KAAK,CAAC,yCAA1CQ,SAAS,eAAEC,YAAY,eAC9B,eAA0BT,QAAQ,CAAC,IAAI,CAAC,yCAAjCU,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,mBAAkB,CAAGV,WAAW,wEAAC,uKACrCO,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,IAAI,CAAC,CAAC,sCAEUE,MAAK,CAC1B,gFAAgF,CACjF,QAFKC,QAAQ,kBAGTA,QAAQ,CAACC,EAAE,8BACR,IAAIC,MAAK,CAAC,uBAAuB,CAAC,+BAGvBF,SAAQ,CAACG,IAAI,EAAE,SAA5BC,IAAI,eAEJC,YAAY,CAAG,EAAE,CAEvB,IAAUC,GAAG,GAAIF,KAAI,CAAC,CACpBC,YAAY,CAACE,IAAI,CAAC,CAChBC,EAAE,CAAEF,GAAG,CACPG,KAAK,CAAEL,IAAI,CAACE,GAAG,CAAC,CAACG,KAAK,CACtBC,WAAW,CAAEN,IAAI,CAACE,GAAG,CAAC,CAACI,WAAW,CAClCC,WAAW,CAAEP,IAAI,CAACE,GAAG,CAAC,CAACK,WACzB,CAAC,CAAC,CACJ,CAEAlB,SAAS,CAACY,YAAY,CAAC,CAAC,iFAExBR,QAAQ,CAAC,YAAMe,OAAO,CAAC,CAAC,QAE1BjB,YAAY,CAAC,KAAK,CAAC,CAAC,oEACrB,GAAE,EAAE,CAAC,CAENR,SAAS,CAAC,UAAM,CACdW,kBAAkB,EAAE,CACtB,CAAC,CAAE,CAACA,kBAAkB,CAAC,CAAC,CAAC,QAEVe,gBAAe,2JAA9B,kBAA+BC,KAAK,gKACXf,MAAK,CAC1B,gFAAgF,CAChF,CACEgB,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAAC,CAC3BK,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAChD,CAAC,CACF,QAPKnB,QAAQ,uCAQKA,SAAQ,CAACG,IAAI,EAAE,QAA5BiB,IAAI,uEACX,kDAED,GAAIC,QAAO,cAAG,mBAAG,kBAAgB,EAAI,CAErC,GAAI7B,MAAM,CAAC8B,MAAM,CAAG,CAAC,CAAE,CACrBD,OAAO,cAAG,KAAC,UAAU,EAAC,MAAM,CAAE7B,MAAO,EAAG,CAC1C,CAEA,GAAII,KAAK,CAAE,CACTyB,OAAO,cAAG,mBAAIzB,KAAK,EAAK,CAC1B,CAEA,GAAIF,SAAS,CAAE,CACb2B,OAAO,cAAG,mBAAG,YAAU,EAAI,CAC7B,CAEA,mBACE,MAAC,KAAK,CAAC,QAAQ,yBACb,sCACE,KAAC,QAAQ,EAAC,UAAU,CAAER,eAAgB,EAAG,EACjC,cACV,sCACE,eAAQ,OAAO,CAAEf,kBAAmB,UAAC,cAAY,EAAS,EAClD,cACV,yBAAUuB,OAAO,EAAW,GACb,CAErB,CAEA,cAAe9B,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}